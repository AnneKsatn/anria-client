<h1>Задачи</h1>


<div class="btn-filter-block">
  <button mat-raised-button color="primary" (click)="addTask()"> Внести задачу </button>
</div>


<div class="table">
  <div class="card">
    <p-table #dt1 [value]="tasks" dataKey="id" [rows]="10" [showCurrentPageReport]="true"
      [rowsPerPageOptions]="[10,25,50]" styleClass="p-datatable-gridlines" [paginator]="true"
      currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
      [globalFilterFields]="['name','country.name','representative.name','status']" [scrollable]="true"
      scrollDirection="both">
      <ng-template pTemplate="caption">
        <div class="flex">
          <span class="p-input-icon-left ml-auto">
            <i class="pi pi-search"></i>
            <input pInputText type="text" (input)="dt1.filterGlobal($any($event.target).value, 'contains')"
              placeholder="Поиск" />
          </span>
        </div>
      </ng-template>
      <ng-template pTemplate="header">
        <tr>
          <th style="width:70%">Название</th>
          <th style="width:30%">Должности</th>
        </tr>

        <tr>
          <th style="width:70%">
            <p-columnFilter type="text" field="name" [showMenu]='false'></p-columnFilter>
          </th>

          <th style="width:30%">
            <p-columnFilter type="text" field="phone" [showMenu]='false'></p-columnFilter>
          </th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-task>
        <tr (click)="goToTaskPage(task)">
          <td style="width:70%">
            {{task.title}}
          </td>

          <td style="width:30%">
            <!-- <span class="image-text">{{user.email}}</span> -->
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="7">No customers found.</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>


<!-- <div class="table">
  <table mat-table [dataSource]="tasks" class="mat-elevation-z8">
    <ng-container [matColumnDef]="column" *ngFor="let column of displayedColumns">
      <th mat-header-cell *matHeaderCellDef> {{column}} </th>
      <td mat-cell *matCellDef="let element"> {{element[column]}} </td>
    </ng-container>

    <ng-container matColumnDef="info" stickyEnd>
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let element" (click)="goToTaskPage(element)">
        <mat-icon>info</mat-icon>
      </td>
    </ng-container>

    <ng-container matColumnDef="edit" stickyEnd>
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let element" (click)="editTask(element)">
        <mat-icon>edit</mat-icon>
      </td>
    </ng-container>

    <ng-container matColumnDef="delete" stickyEnd>
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let element" (click)="deleteTask(element['id'])">
        <mat-icon>delete</mat-icon>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
    <tr mat-row *matRowDef="let row; columns: columnsToDisplay;"></tr>
  </table>
</div>

 -->
